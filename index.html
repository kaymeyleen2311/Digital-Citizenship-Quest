<!doctype html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Game Hub</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { box-sizing: border-box; user-select: none; margin: 0; }
    .app-wrapper { font-family: 'Fredoka', sans-serif; }
    .game-card { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); cursor: pointer; }
    .game-card:hover { transform: translateY(-8px) scale(1.02); filter: brightness(1.1); }
    
    @keyframes float { 0%,100%{transform:translateY(0);}50%{transform:translateY(-20px);} }
    @keyframes pop-in { 0%{transform:scale(0);opacity:0;}100%{transform:scale(1);opacity:1;} }
    .float { animation: float 3s ease-in-out infinite; }
    
    .click-sound { position:fixed; font-size:1.5rem; font-weight:bold; pointer-events:none; z-index:1000; animation: pop-in 0.4s ease-out forwards; text-shadow: 2px 2px 0 rgba(0,0,0,0.2); }
    
    /* Sound Toggle Styles */
    #soundToggle { position:fixed; top:1.5rem; right:1.5rem; z-index:100; background:rgba(255,255,255,0.25); backdrop-filter:blur(8px); padding:0.75rem; border-radius:50%; width:60px; height:60px; display:flex; align-items:center; justify-content:center; border:2px solid white; cursor:pointer; transition: opacity 0.3s, visibility 0.3s; }
    .sound-off { opacity: 0.5; background: rgba(0,0,0,0.4); }
    .hidden-ui { opacity: 0 !important; visibility: hidden !important; pointer-events: none !important; }

    .fixed-bg {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: linear-gradient(135deg, #667eea, #764ba2, #ff758c);
        background-size: 400% 400%;
        animation: gradientBG 15s ease infinite; z-index: -1;
    }
    @keyframes gradientBG { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
  </style>
</head>
<body class="h-full overflow-hidden">

<div class="fixed-bg"></div>

<button id="soundToggle" title="Toggle Hub Music">
    <span id="soundIcon">üîä</span>
</button>

<div id="app" class="app-wrapper w-full h-full flex flex-col overflow-auto relative">
  <div id="main-menu" class="min-h-full flex flex-col p-6">
    <div class="text-center mb-8 mt-8">
      <div class="text-7xl mb-4 float">üéÆ</div>
      <h1 class="text-5xl md:text-7xl font-black text-white mb-3" style="font-family:'Space Grotesk',sans-serif;">GAME HUB</h1>
      <p class="text-xl text-white/90">Click anywhere to start the music!</p>
    </div>

    <div class="flex-1 flex items-center justify-center pb-12">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl w-full px-4">
        <div class="game-card bg-white/10 backdrop-blur-md rounded-3xl p-6 border-2 border-white/20 relative" onclick="loadGame(1)">
          <div class="text-6xl mb-4 text-center">üé≤</div>
          <h3 class="text-2xl font-bold text-white text-center mb-2">Game 1</h3>
          <div class="bg-cyan-500 rounded-full py-2 text-center text-white font-bold text-sm">PLAY NOW</div>
        </div>
        <div class="game-card bg-white/10 backdrop-blur-md rounded-3xl p-6 border-2 border-white/20 relative" onclick="loadGame(2)">
          <div class="text-6xl mb-4 text-center">üéà</div>
          <h3 class="text-2xl font-bold text-white text-center mb-2">Game 2</h3>
          <div class="bg-green-500 rounded-full py-2 text-center text-white font-bold text-sm">PLAY NOW</div>
        </div>
        <div class="game-card bg-white/10 backdrop-blur-md rounded-3xl p-6 border-2 border-white/20 relative" onclick="loadGame(3)">
          <div class="text-6xl mb-4 text-center">üõ°Ô∏è</div>
          <h3 class="text-2xl font-bold text-white text-center mb-2">Game 3</h3>
          <div class="bg-purple-500 rounded-full py-2 text-center text-white font-bold text-sm">PLAY NOW</div>
        </div>
        <div class="game-card bg-white/10 backdrop-blur-md rounded-3xl p-6 border-2 border-white/20 relative" onclick="loadGame(4)">
          <div class="text-6xl mb-4 text-center">üõû</div>
          <h3 class="text-2xl font-bold text-white text-center mb-2">Game 4</h3>
          <div class="bg-pink-500 rounded-full py-2 text-center text-white font-bold text-sm">PLAY NOW</div>
        </div>
        <div class="game-card bg-white/10 backdrop-blur-md rounded-3xl p-6 border-2 border-white/20 relative" onclick="loadGame(5)">
          <div class="text-6xl mb-4 text-center">üëÄ</div>
          <h3 class="text-2xl font-bold text-white text-center mb-2">Game 5</h3>
          <div class="bg-yellow-500 rounded-full py-2 text-center text-white font-bold text-sm">PLAY NOW</div>
        </div>
      </div>
    </div>
  </div>

  <div id="game-screen" class="hidden w-full h-full flex flex-col bg-black absolute top-0 left-0 z-50">
    <div class="bg-gray-900 px-4 py-3 flex items-center justify-between">
      <button onclick="backToMenu()" class="bg-white/10 text-white font-bold py-2 px-6 rounded-full hover:bg-white/20 transition-colors">‚Ü© Exit Game</button>
      <h2 id="current-game-title" class="text-white font-bold text-xl">Loading...</h2>
      <div class="w-12"></div>
    </div>
    <div id="game-content" class="flex-1 w-full bg-white"></div>
  </div>
</div>

<script>
  const AudioController = {
    ctx: null, isMuted: false, isPlaying: false, step: 0, intervalId: null,
    notes: { 'C4': 261.63, 'E4': 329.63, 'G4': 392.00, 'B4': 493.88, 'C5': 523.25 },
    sequence: ['C4', 'E4', 'G4', 'B4', 'C5', 'G4', 'E4', 'C4'],
    
    init() { 
        if (!this.ctx) this.ctx = new (window.AudioContext || window.webkitAudioContext)(); 
        if (this.ctx.state === 'suspended') this.ctx.resume();
    },
    
    playTone(freq, duration, vol) {
      if (this.isMuted || !this.ctx) return;
      const osc = this.ctx.createOscillator();
      const gain = this.ctx.createGain();
      osc.type = 'triangle'; osc.frequency.value = freq;
      osc.connect(gain); gain.connect(this.ctx.destination);
      gain.gain.setValueAtTime(vol, this.ctx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + duration);
      osc.start(); osc.stop(this.ctx.currentTime + duration);
    },

    startBGM() {
      if (this.isPlaying || this.isMuted) return;
      this.isPlaying = true;
      this.intervalId = setInterval(() => {
        const note = this.sequence[this.step % this.sequence.length];
        this.playTone(this.notes[note], 0.4, 1.0);
        this.step++;
      }, 200);
    },

    stopBGM() { this.isPlaying = false; clearInterval(this.intervalId); },

    toggle() {
      this.init();
      this.isMuted = !this.isMuted;
      document.getElementById('soundIcon').innerText = this.isMuted ? 'üîá' : 'üîä';
      document.getElementById('soundToggle').classList.toggle('sound-off', this.isMuted);
      this.isMuted ? this.stopBGM() : this.startBGM();
    }
  };

  // AUTO-PLAY LOGIC: Music starts on the first click anywhere on the page
  window.addEventListener('click', () => {
    AudioController.init();
    AudioController.startBGM();
  }, { once: true });

  function loadGame(num) {
    AudioController.stopBGM();
    document.getElementById('soundToggle').classList.add('hidden-ui');
    const content = document.getElementById('game-content');
    const titles = ["üé≤ Board Game", "üéà Balloon Pop", "üõ°Ô∏è Goblin Rush", "üõû Screen Quest", "üëÄ Eye Care"];
    document.getElementById('current-game-title').innerText = titles[num-1];
    content.innerHTML = '';
    const iframe = document.createElement('iframe');
    iframe.style.width = '100%'; iframe.style.height = '100%'; iframe.style.border = 'none';
    iframe.src = `game${num}.html`;
    content.appendChild(iframe);
    document.getElementById('main-menu').classList.add('hidden');
    document.getElementById('game-screen').classList.remove('hidden');
  }

  function backToMenu() {
    if (!AudioController.isMuted) AudioController.startBGM();
    document.getElementById('soundToggle').classList.remove('hidden-ui');
    document.getElementById('game-screen').classList.add('hidden');
    document.getElementById('main-menu').classList.remove('hidden');
    document.getElementById('game-content').innerHTML = '';
  }

  document.addEventListener('click', (e) => {
    if (e.target.closest('.game-card')) {
      const el = document.createElement('div');
      el.className = 'click-sound'; el.innerText = 'START! üöÄ';
      el.style.left = e.clientX + 'px'; el.style.top = e.clientY + 'px';
      document.body.appendChild(el);
      setTimeout(() => el.remove(), 400);
      AudioController.playTone(600, 0.1, 0.1);
    }
  });

  document.getElementById('soundToggle').onclick = () => AudioController.toggle();
</script>
</body>
</html>
